<html>
	<!-- require this so that apostrophes don't become all weird. -->
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<head>
		<audio id="bgmusic">
			<!--put whatever background music you want in here.  Easier just to rename your mp3 into "music" and put it in the same folder as this html file.-->
			<source src="music.mp3" type="audio/mpeg">
			Your browser does not support the audio element.
		</audio>	
		<title>OpenSpace Constellations Tonight</title>
		<link rel="stylesheet" type="text/css" href="main2.css">
		<script type="text/javascript" src="openspace-api.js"></script>
		<!--Making it easier to write and edit Presenter Messages/Prompts.-->
		<script type="text/javascript" src="PresenterMessages.js"></script>
		<script type="text/javascript">
			//by Jeff Nee at NASA's Museum & Informal Education Alliance at JPL
			//Last updated: May 2024
			//At the bottom of the page are the button messages that you can customize for prenters, search for "var buttonMessages"

			//Thanks to ChatGPT for some code.
			
			//These are variables to customize for your own dome as needed/desired:
			//wherever your content will be on your local machine
			var contentPath = "C:/OpenSpace-ConstellationsTonight/";
			//default duration for fades and flying:
			const duration = 1;		
			const flightDuration = 15;
			//Note this is the default tilt for the single fisheye config for OpenSpace
			var defaultTilt =27;
			//Your coordinates, default is set to JPL in Pasadena, CA
			var defaultLatitude = 34.1983;
			var defaultLongitude = -118.1753;
			var defaultAltitude = 500;
			//openspace.globebrowsing.goToGeo('Earth',34.1983,-118.1753,1000)
			//This was eyeballed by the position of Polaris then using the "Show Nav State" button
			var lookUpPitch = 2.0425456185375848;
			var lookUpUp = [-0.25832485826551366,-0.49922160959589273,-0.8270707660863061];
			var lookUpYaw = 0.0018312094802227185;
			var lowPosition = [-2491056.5456290348,-4650613.762704544,3585169.2978792596];
			var highPosition = [-2529914.3964139516,-4723158.425440807,3641094.152005422];
			var defaultNavigationState = {
				Anchor:'Earth',
				Pitch:lookUpPitch,
				Position:lowPosition,
				Up:lookUpUp,
				Yaw:lookUpYaw,
			};
			var inSpaceNavigationState = {
				Anchor:'Earth',
				Pitch:lookUpPitch,
				Position:highPosition,
				Up:lookUpUp,
				Yaw:lookUpYaw,
			};			
			//You might also want to adjust the Earth Texture layers, Ctrl+F for "EarthTexturelayers"


			//These are functional variables that are needed for the interface to work
			//resetting the openspace interface:
			var openspace = null;
			//array to keep track of loaded images
			var saveImages=[];	
			//array to save constellations for quick remembering, initialize as empty, which will show all by default
			var saveConstellations = [];
			
			
			
			async function hideAllTrails() {
				
				openspace.setPropertyValue("Scene.*Trail.Renderable.Opacity", 0, 1)
				openspace.setPropertyValueSingle("Scene.ISS_trail.Renderable.Fade",0,1)
				setTimeout(() => {
					openspace.setPropertyValue("Scene.*Trail.Renderable.Enabled", false)
				}, duration * 1000)
			}
			
			async function showAllTrails() {
				openspace.setPropertyValue("Scene.*Trail.Renderable.Opacity", 0, duration/10)
				setTimeout(() => {
					openspace.setPropertyValue("Scene.*Trail.Renderable.Enabled", true)
					openspace.setPropertyValue("Scene.*Trail.Renderable.Opacity", 1, duration)
					openspace.setPropertyValueSingle("Scene.ISS_trail.Renderable.Enabled", true)
					openspace.setPropertyValueSingle("Scene.ISS_trail.Renderable.Fade",1,duration)
				}, duration*100)
			}
			
			function EarthAtmosphereToggle(clickedOrNot) {
				if (clickedOrNot != 'clicked') { 
					openspace.setPropertyValueSingle("Scene.EarthAtmosphere.Renderable.Fade",0,duration)
					setTimeout(() => {
						openspace.setPropertyValueSingle("Scene.EarthAtmosphere.Renderable.Enabled", false)
					}, duration*1000)
					clickedOrNot = 'clicked';
				} else {
					setTimeout(() => {						
						openspace.setPropertyValueSingle("Scene.EarthAtmosphere.Renderable.Enabled", true)
						openspace.setPropertyValueSingle("Scene.EarthAtmosphere.Renderable.Fade",1,duration)
					}, duration*100)		
					clickedOrNot = '';							
				}
				return clickedOrNot;						
			}

			function ChangeDescription(sectionName,presenterScript) {
				//function to display a presenter script when a button is pressed
				//clear it
				document.getElementById(sectionName).innerHTML = "";
				//Then add the text
				document.getElementById(sectionName).innerHTML += presenterScript;
				//This is specifcially for the NavState Programming button, turning an object into a string:
				if (typeof presenterScript !== "string") {
					presenterScript.then(x => myDisplay(x));
					function myDisplay(navObj) {
						document.getElementById(sectionName).innerHTML = JSON.stringify(navObj);
					}
				}
			}
			

			//shorthand function to fade stick figures
			function fadeSticks(opacity,functionDuration){
				openspace.setPropertyValueSingle("Scene.Constellations.Renderable.Enabled", true)
				openspace.setPropertyValueSingle("Scene.Constellations.Renderable.Fade",opacity,functionDuration)
				if (opacity == 0) {
					setTimeout(() => {
						openspace.setPropertyValueSingle("Scene.Constellations.Renderable.Enabled", false)
					}, functionDuration*1000)
				}					
			}
			function LabelConstellations(opacity,functionDuration) {
				openspace.setPropertyValueSingle("Scene.Constellations.Renderable.Labels.Enabled", true)
				openspace.setPropertyValueSingle("Scene.Constellations.Renderable.Labels.Fade",opacity,functionDuration)
				setTimeout(() => {
					if (opacity == 0) {
						openspace.setPropertyValueSingle("Scene.Constellations.Renderable.Labels.Enabled", false)
					}		
				}, functionDuration*1000)
			}
			//Adding Constellations
			function AddConstellation(constellationName) {
				//check if constellation is saved already
				 if (saveConstellations.indexOf(constellationName) < 0) {
					//If not then add it
					saveConstellations.push(constellationName);
				 }					
				openspace.setPropertyValueSingle("Scene.Constellations.Renderable.ConstellationSelection", saveConstellations)
				openspace.setPropertyValueSingle("Scene.ConstellationsExtragalactic.Renderable.ConstellationSelection", saveConstellations)
			}
			//Removing Constellations
			function removeConstellation(constellationName){
				//check if constellation is saved already
				var index = saveConstellations.indexOf(constellationName);
				if (index > -1) {
					//If yes, then remove it
					saveConstellations.splice(index, 1);
				}
				 //If there are no more saved Constellations, turn them off
				 //OpenSpace makes it so that if there are no selected constellations it turns them all on
				if (saveConstellations.length < 1) {
					fadeSticks(0, duration);
					setTimeout(() => {
						openspace.setPropertyValueSingle("Scene.Constellations.Renderable.ConstellationSelection", saveConstellations)
						openspace.setPropertyValueSingle("Scene.ConstellationsExtragalactic.Renderable.ConstellationSelection", saveConstellations)
					}, duration*1000+100)
				} 
				 //Otherwise, just fade them off quickly and bring the rest back
				if (saveConstellations.length > 0) {
					fadeSticks(0,0.5);
					setTimeout(() => {
						openspace.setPropertyValueSingle("Scene.Constellations.Renderable.ConstellationSelection", saveConstellations)
						openspace.setPropertyValueSingle("Scene.ConstellationsExtragalactic.Renderable.ConstellationSelection", saveConstellations)
						fadeSticks(1,0.5);
					}, 500)		
				}
			}
			//Stick figures
			function ConstellationStickButton(constellationName, clickedOrNot){
				if (clickedOrNot != 'clicked') { 
					fadeSticks(0,0.5);
					setTimeout(() => {
						AddConstellation(constellationName);
						fadeSticks(1,duration);
					}, 500)
					clickedOrNot = 'clicked';
				} else {
					setTimeout(() => {						
						removeConstellation(constellationName);
					}, 100)		
					clickedOrNot = '';							
				}
				return clickedOrNot;
			}
			//Constellation Art
			function ConstellationImageButton(constellationTag, clickedOrNot) {
				if (clickedOrNot != 'clicked') {
					openspace.setPropertyValueSingle('Scene.ImageConstellation-'+constellationTag+'.Renderable.Enabled', true)
					openspace.setPropertyValueSingle('Scene.ImageConstellation-'+constellationTag+'.Renderable.Fade',1,duration)
					//default white, but you can customize RGB fractions, note that the {} turns into [] here:
					openspace.setPropertyValueSingle('Scene.ImageConstellation-'+constellationTag+'.Renderable.MultiplyColor', [1,1,1])
					clickedOrNot = 'clicked';
				} else {
					openspace.setPropertyValueSingle('Scene.ImageConstellation-'+constellationTag+'.Renderable.Fade',0,duration)
					setTimeout(() => {
						openspace.setPropertyValueSingle('Scene.ImageConstellation-'+constellationTag+'.Renderable.Enabled', false)
					}, duration*1000+100)
					clickedOrNot = '';
				}
				return clickedOrNot;
			}
			//An Array to keep track of images

			function DeepSkyImage(objectName,buttonGroupTitle,buttonName,filePath,clickedOrNot) {
				var imageMaxSize = 0.75;
				var imageObject = { 
					Identifier: objectName, 
					Name: objectName, 
					Type: "ScreenSpaceImageLocal", 
					TexturePath: contentPath+filePath
				};
				//openspace.setPropertyValueSingle("ScreenSpace.test.UseRadiusAzimuthElevation", true)
				//openspace.setPropertyValueSingle("ScreenSpace.test.RadiusAzimuthElevation", {2.360000,0.000000,0.000000})
				if (clickedOrNot != 'clicked') {
					//remove it first because it will cause problems otherwise.
					openspace.removeScreenSpaceRenderable(imageObject)
					openspace.addScreenSpaceRenderable(imageObject)
					saveImages.push(objectName);
					openspace.setPropertyValueSingle("ScreenSpace."+objectName+".Scale",0,0)
					setTimeout(() => {openspace.setPropertyValueSingle("ScreenSpace."+objectName+".Scale",imageMaxSize,duration)},100)
					if (saveImages.indexOf(objectName) < 0) {
						//If not then add it
						saveImages.push(objectName);
					}		
					clickedOrNot = 'clicked';
					ChangeDescription(buttonGroupTitle,findMessageByButtonName(buttonMessages, buttonName));
				} else {
					openspace.setPropertyValueSingle("ScreenSpace."+objectName+".Scale",0,duration)
					setTimeout(() => {
						openspace.removeScreenSpaceRenderable(imageObject)
						//remove this from the array
						var index = saveImages.indexOf(objectName);
						if (index > -1) {
							//If yes, then remove it
							saveImages.splice(index, 1);
						}
					},duration*1000)
					clickedOrNot = '';
					ChangeDescription(buttonGroupTitle,'');
				}
				return clickedOrNot;
			}
			
			function AddVideo() {
				var localVideo = {
					Identifier: "fakeClock",
					Type: "ScreenSpaceVideo",
					Name: "fakeClock",
					Video: contentPath+"clock-24hr-in-30s.mp4"
				}
				//remove it first because it will cause problems otherwise.
				openspace.removeScreenSpaceRenderable(localVideo)
				openspace.addScreenSpaceRenderable(localVideo)
				//openspace.setPropertyValueSingle("ScreenSpace.fakeClock.Scale",0,0)
			}
			
			//just a place holder function to move images wherever you want
			function MoveDeepSkyImage (objectName, imageAzimuth, imageElevation) {
			}
			
			var setFocus = (focus) => {
				openspace.setPropertyValue('NavigationHandler.OrbitalNavigator.Anchor', focus);
				openspace.setPropertyValue('NavigationHandler.OrbitalNavigator.RetargetAnchor', null);
			}
			//functions to start and stop rotation of the camera:
			var rotateCamera = 0;
			function StartOrbit() {
				rotateCamera = 1;
				var globalRotation = setInterval(()=>{
					openspace.navigation.addGlobalRotation(1,0)
					if (rotateCamera != 1) {
						clearInterval(globalRotation);
						openspace.navigation.addGlobalRotation(0,0)
					}
				},500);
			}

			function StopOrbit() {
				rotateCamera = 0;
			}
			function TemporaryStopOrbit(){
				if (rotateCamera == 1) {
					//stop orbit first
					StopOrbit();
					document.getElementById('Orbit').className = '';
					//if it was already going, assume that you want to restart it after the flight
					setTimeout(() => {
						StartOrbit();
						document.getElementById('Orbit').className = 'clicked';
					},flightDuration*1000+1000)
				}
			}
			function findMessageByButtonName(array, targetButtonName) {
				for (let i = 0; i < array.length; i++) {
					if (array[i].buttonName === targetButtonName) {
						return array[i].message;
					}
				}
				return "No message";  // Return null if no match is found
			}
//buttons start here
			var setupButtons = {
				title: "Setup Buttons",
				description: " ",
				buttons: {
					'Setup': () => {
						ChangeDescription(setupButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						openspace.setPropertyValueSingle('Modules.Video.Enabled', true)
						document.getElementById('Set Earth Texture').click();
						document.getElementById('Turn on Mars Texture').click();
						document.getElementById('Jump to JPL').click();
						document.getElementById('Pause Time').click();	
						setTimeout(() => {	
							document.getElementById('Hide Trails').click();
							document.getElementById('Hide Earth').click();
							document.getElementById('Night Sky Planets').click();
							ChangeDescription(setupButtons.title,'');
						}, 3100)
						document.getElementById('Jump to JPL').click();

					},
					'Set Earth Texture': () => {
						//adjust these EarthTexturelayers as you wish:
						//Turning on Blue Marble Earth Layer:
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.ColorLayers.Blue_Marble.Fade',0, 1)
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.ColorLayers.Blue_Marble.Enabled', true)
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.ColorLayers.Blue_Marble.Fade',1, duration)
						//Turning on Earth at Night Layer:
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.NightLayers.Earth_Night_Texture.Fade',0, 1)
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.NightLayers.Earth_Night_Texture.Enabled', true)
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.NightLayers.Earth_Night_Texture.Fade',1, duration)
						//Turn off ESRI_VIIRS_Combo
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.ColorLayers.ESRI_VIIRS_Combo.Fade',0,1)
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.ColorLayers.ESRI_VIIRS_Combo.Enabled', false)
						//Turn on Aqua_Modis
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.ColorLayers.Aqua_Modis_Temporal.Fade',0)
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.ColorLayers.Aqua_Modis_Temporal.Enabled', true)
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Layers.ColorLayers.Aqua_Modis_Temporal.Fade',1, duration)
						//Turning on the Earth:
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Opacity', 0, 0.1)
						openspace.setPropertyValueSingle('Scene.EarthAtmosphere.Renderable.SunIntensity', 0, 1)
						setTimeout(() => {	
							//SunIntensity is 6.9 by default
							openspace.setPropertyValueSingle('Scene.EarthAtmosphere.Renderable.SunIntensity', 6.9, 1)
							openspace.setPropertyValueSingle('Scene.Earth.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.Earth.Renderable.Opacity', 1, 1)
						},100)
					},
					'Focus on the Earth': () => {setFocus('Earth')
					},
					'Turn on Mars Texture': () => {
						openspace.setPropertyValueSingle('Scene.Mars.Renderable.Layers.ColorLayers.Mars_Texture.Fade',0)
						openspace.setPropertyValueSingle('Scene.Mars.Renderable.Layers.ColorLayers.Mars_Texture.Enabled', true)
						openspace.setPropertyValueSingle('Scene.Mars.Renderable.Layers.ColorLayers.Mars_Texture.Fade',1, duration)
					},
					'Jump to JPL': () => {
						openspace.setPropertyValueSingle('RenderEngine.BlackoutFactor',0,2)
						setTimeout(() => {
							//coordinates to customize
							openspace.globebrowsing.goToGeo('Earth',defaultLatitude,defaultLongitude,defaultAltitude)
							openspace.navigation.setNavigationState(defaultNavigationState)
							openspace.setPropertyValueSingle('RenderEngine.BlackoutFactor',1,2)
						}, 2100)
					},
					'Earth Atmosphere': async () => {
						this.className = EarthAtmosphereToggle(this.className);
					},
					'Hide Trails': () => {
						hideAllTrails();
					},
					'Show Trails': () => {
						showAllTrails();
					},
					'Hide Earth': () => {
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Opacity', 0, 2)
						//openspace.setPropertyValueSingle('Scene.EarthAtmosphere.Renderable.SunIntensity', 0, 1)
					},
					'Show Earth': () => {
						//openspace.setPropertyValueSingle('Scene.EarthAtmosphere.Renderable.SunIntensity', 6.9, 1)
						openspace.setPropertyValueSingle('Scene.Earth.Renderable.Opacity', 1, 2)
					},
					'Pause Time': () => {
							//stopping time
							openspace.time.interpolatePause(true,duration)
					},
					'Run Time': () => {
							//play time
							openspace.time.interpolatePause(false,duration)
					},
				},
			};
			var timeButtons = {
				//One day create time control buttons, but for now OpenSpace has good realtime time controls.
				title: "Time Control",
				description: " ",
				buttons: {
					'button1': () => {
					},
					'togglebutton1': async () => {
						
						if (this.className != 'clicked') { 
							setTimeout(() => {
							}, 100)
							this.className = 'clicked';
						} else {
							setTimeout(() => {
							}, duration*1000+100)
							this.className = '';
						}
					},
				},
			};			
			var planetZoomButtons = {
				title: "Zoom Planets from Earth",
				description: " ",
				buttons: {
					//add extra space to match with Label buttons on the next row
					'Night Sky Planets': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.NightSkyJupiter.Renderable.Fade',0)
							openspace.setPropertyValueSingle('Scene.NightSkyJupiter.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.NightSkyJupiter.Renderable.Fade',1, duration)
							openspace.setPropertyValueSingle('Scene.NightSkyMars.Renderable.Fade',0)
							openspace.setPropertyValueSingle('Scene.NightSkyMars.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.NightSkyMars.Renderable.Fade',1, duration)
							openspace.setPropertyValueSingle('Scene.NightSkyMercury.Renderable.Fade',0)
							openspace.setPropertyValueSingle('Scene.NightSkyMercury.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.NightSkyMercury.Renderable.Fade',1, duration)
							openspace.setPropertyValueSingle('Scene.NightSkySaturn.Renderable.Fade',0)
							openspace.setPropertyValueSingle('Scene.NightSkySaturn.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.NightSkySaturn.Renderable.Fade',1, duration)
							openspace.setPropertyValueSingle('Scene.NightSkyVenus.Renderable.Fade',0)
							openspace.setPropertyValueSingle('Scene.NightSkyVenus.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.NightSkyVenus.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.NightSkyJupiter.Renderable.Fade',0, duration)
							openspace.setPropertyValueSingle('Scene.NightSkyMars.Renderable.Fade',0, duration)
							openspace.setPropertyValueSingle('Scene.NightSkyMercury.Renderable.Fade',0, duration)
							openspace.setPropertyValueSingle('Scene.NightSkySaturn.Renderable.Fade',0, duration)
							openspace.setPropertyValueSingle('Scene.NightSkyVenus.Renderable.Fade',0, duration)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.NightSkyJupiter.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.NightSkyMars.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.NightSkyMercury.Renderable.Enabled', false)								
								openspace.setPropertyValueSingle('Scene.NightSkySaturn.Renderable.Enabled', false)								
								openspace.setPropertyValueSingle('Scene.NightSkyVenus.Renderable.Enabled', false)								
							},duration*1000)
							this.className = '';
						}
						
					},
					'Mercury Zoom_': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Mercury.Scale.Scale', 2000, 1)
							openspace.setPropertyValueSingle('Scene.Mercury.Renderable.PerformShading', false)
							this.className = 'clicked';
							ChangeDescription(planetZoomButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						} else {
							openspace.setPropertyValueSingle('Scene.Mercury.Scale.Scale', 1, 1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Mercury.Renderable.PerformShading', true)
							}, 1100)
							this.className = '';
							ChangeDescription(planetZoomButtons.title,'');
						}
					},
					'Venus Zoom_': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Venus.Scale.Scale', 2000, 1)
							openspace.setPropertyValueSingle('Scene.Venus.Renderable.PerformShading', false)
							this.className = 'clicked';
							ChangeDescription(planetZoomButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						} else {
							openspace.setPropertyValueSingle('Scene.Venus.Scale.Scale', 1, 1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Venus.Renderable.PerformShading', true)
							}, 1100)
							this.className = '';
							ChangeDescription(planetZoomButtons.title,'');
						}
					},
					'Mars Zoom_': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Mars.Scale.Scale', 2000, 1)
							openspace.setPropertyValueSingle('Scene.Mars.Renderable.PerformShading', false)
							this.className = 'clicked';
							ChangeDescription(planetZoomButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						} else {
							openspace.setPropertyValueSingle('Scene.Mars.Scale.Scale', 1, 1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Mars.Renderable.PerformShading', true)
							}, 1100)
							this.className = '';
							ChangeDescription(planetZoomButtons.title,'');
						}
					},
					'Jupiter Zoom_': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Jupiter.Scale.Scale', 2000, 1)
							openspace.setPropertyValueSingle('Scene.Jupiter.Renderable.PerformShading', false)
							this.className = 'clicked';
							ChangeDescription(planetZoomButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						} else {
							openspace.setPropertyValueSingle('Scene.Jupiter.Scale.Scale', 1, 1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Jupiter.Renderable.PerformShading', true)
							}, 1100)
							this.className = '';
							ChangeDescription(planetZoomButtons.title,'');
						}
					},
					'Saturn Zoom_': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Saturn.Scale.Scale', 2000, 1)
							openspace.setPropertyValueSingle('Scene.Saturn.Renderable.PerformShading', false)
							this.className = 'clicked';
							ChangeDescription(planetZoomButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						} else {
							openspace.setPropertyValueSingle('Scene.Saturn.Scale.Scale', 1, 1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Saturn.Renderable.PerformShading', true)
							}, 1100)
							this.className = '';
							ChangeDescription(planetZoomButtons.title,'');
						}
					},
					'Uranus Zoom_': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Uranus.Scale.Scale', 2000, 1)
							openspace.setPropertyValueSingle('Scene.Uranus.Renderable.PerformShading', false)
							this.className = 'clicked';
							ChangeDescription(planetZoomButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						} else {
							openspace.setPropertyValueSingle('Scene.Uranus.Scale.Scale', 1, 1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Uranus.Renderable.PerformShading', true)
							}, 1100)
							this.className = '';
							ChangeDescription(planetZoomButtons.title,'');
						}
					},
					'Neptune Zoom_': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Neptune.Scale.Scale', 2000, 1)
							openspace.setPropertyValueSingle('Scene.Neptune.Renderable.PerformShading', false)
							this.className = 'clicked';
							ChangeDescription(planetZoomButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						} else {
							openspace.setPropertyValueSingle('Scene.Neptune.Scale.Scale', 1, 1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Neptune.Renderable.PerformShading', true)
							}, 1100)
							this.className = '';
							ChangeDescription(planetZoomButtons.title,'');
						}
					},
					'Pluto Zoom_': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Pluto.Scale.Scale', 50000, 1)
							openspace.setPropertyValueSingle('Scene.Pluto.Renderable.PerformShading', false)
							this.className = 'clicked';
							ChangeDescription(planetZoomButtons.title,findMessageByButtonName(buttonMessages, this.textContent));
						} else {
							openspace.setPropertyValueSingle('Scene.Pluto.Scale.Scale', 1, 1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Pluto.Renderable.PerformShading', true)
							}, 1100)
							this.className = '';
							ChangeDescription(planetZoomButtons.title,'');
						}
					},
					'Mercury Label': async () => {
						openspace.setPropertyValueSingle('Scene.MercuryLabel.Renderable.Enabled', true)
						openspace.setPropertyValueSingle('Scene.MercuryLabel.Renderable.OrientationOption', 1.000000)
						openspace.setPropertyValueSingle('Scene.MercuryLabel.Translation.Position', [0.000000,0.000000,2e6])
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.MercuryLabel.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.MercuryLabel.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.MercuryLabel.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Venus Label': async () => {
						openspace.setPropertyValueSingle('Scene.VenusLabel.Renderable.Enabled', true)
						openspace.setPropertyValueSingle('Scene.VenusLabel.Renderable.OrientationOption', 1.000000)
						openspace.setPropertyValueSingle('Scene.VenusLabel.Translation.Position', [0.000000,0.000000,2e6])
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.VenusLabel.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.VenusLabel.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.VenusLabel.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Mars Label': async () => {
						openspace.setPropertyValueSingle('Scene.MarsLabel.Renderable.Enabled', true)
						openspace.setPropertyValueSingle('Scene.MarsLabel.Renderable.OrientationOption', 1.000000)
						openspace.setPropertyValueSingle('Scene.MarsLabel.Translation.Position', [0.000000,0.000000,2e6])
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.MarsLabel.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.MarsLabel.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.MarsLabel.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Jupiter Label': async () => {
						openspace.setPropertyValueSingle('Scene.JupiterLabel.Renderable.Enabled', true)
						openspace.setPropertyValueSingle('Scene.JupiterLabel.Renderable.OrientationOption', 1.000000)
						openspace.setPropertyValueSingle('Scene.JupiterLabel.Translation.Position', [0.000000,0.000000,8e7])
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.JupiterLabel.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.JupiterLabel.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.JupiterLabel.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Saturn Label': async () => {
						openspace.setPropertyValueSingle('Scene.SaturnLabel.Renderable.Enabled', true)
						openspace.setPropertyValueSingle('Scene.SaturnLabel.Renderable.OrientationOption', 1.000000)
						openspace.setPropertyValueSingle('Scene.SaturnLabel.Translation.Position', [0.000000,0.000000,5e7])
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.SaturnLabel.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.SaturnLabel.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.SaturnLabel.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Uranus Label': async () => {
						openspace.setPropertyValueSingle('Scene.UranusLabel.Renderable.Enabled', true)
						openspace.setPropertyValueSingle('Scene.UranusLabel.Renderable.Size', 9.5)
						openspace.setPropertyValueSingle('Scene.UranusLabel.Renderable.OrientationOption', 1.000000)
						openspace.setPropertyValueSingle('Scene.UranusLabel.Translation.Position', [0.000000,0.000000,6e7])
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.UranusLabel.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.UranusLabel.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.UranusLabel.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Neptune Label': async () => {
						openspace.setPropertyValueSingle('Scene.NeptuneLabel.Renderable.Enabled', true)
						openspace.setPropertyValueSingle('Scene.NeptuneLabel.Renderable.Size', 9.5)
						openspace.setPropertyValueSingle('Scene.NeptuneLabel.Renderable.OrientationOption', 1.000000)
						openspace.setPropertyValueSingle('Scene.NeptuneLabel.Translation.Position', [0.000000,0.000000,5e7])
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.NeptuneLabel.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.NeptuneLabel.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.NeptuneLabel.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Pluto Label': async () => {
						openspace.setPropertyValueSingle('Scene.PlutoLabel.Renderable.Enabled', true)
						openspace.setPropertyValueSingle('Scene.PlutoLabel.Renderable.OrientationOption', 1.000000)
						openspace.setPropertyValueSingle('Scene.PlutoLabel.Translation.Position', [0.000000,0.000000,-4e6])
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.PlutoLabel.Renderable.Fade',1, duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.PlutoLabel.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.PlutoLabel.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
				},
			};

			
			var bigDipperButtons = {
				title: "Big Dipper",
				description: " ",
				buttons: {
					'Light Pollution': async () => {
						//animating light polution.  Change max and interval as desired
						var lightPollutionMin = 1;
						var lightPollutionMax = 9;
						var lightPollutionInterval = 150; //in milliseconds
						if (this.className != 'clicked') { 
							var i=lightPollutionMin;							
							var lightPollutionAnimation = setInterval(() => {
								openspace.action.triggerAction('os.nightsky.SetLightPollutionLevel'+i)
								if (i >= lightPollutionMax) {
									clearInterval(lightPollutionAnimation)
								}
								i++;
							},lightPollutionInterval)
							this.className = 'clicked';
						} else {
							var i=lightPollutionMax;							
							var lightPollutionAnimation = setInterval(() => {
								openspace.action.triggerAction('os.nightsky.SetLightPollutionLevel'+i)
								if (i <= lightPollutionMin) {
									clearInterval(lightPollutionAnimation)
								}
								i--;
							},lightPollutionInterval)
							setTimeout(() => {
								openspace.action.triggerAction('os.nightsky.UndoLightPollution')
							},lightPollutionInterval*lightPollutionMax)
							this.className = '';
						}						
					},
					'Ursa Major Stick': async () => {
						if (this.className != 'clicked') { 
							openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Fade',0,0.1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.ConstellationSelection', ['Ursa Major'])
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Enabled', true)
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Fade',1,duration)
							}, 100)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Fade',0,duration)								
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.ConstellationSelection', [])
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Enabled', false)							
							}, duration*1000+100)
							this.className = '';
						}
					},
					'Ursa Major Image': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.Fade',1,duration)
							//default white, but you can customize RGB fractions, note that the {} turns into [] here:
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.MultiplyColor', [1,1,1])
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.Fade',0,duration)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.Enabled', false)
							}, duration*1000+100)
							this.className = '';
						}
					},
					'Polaris Marker': async () => {
						var PolarisMarkerObject = { 
							Identifier: 'PolarisMarker', 
							Name: 'PolarisMarker', 
							Type: 'ScreenSpaceImageLocal', 
							TexturePath: contentPath+'PolarisMarker.png',
						};
						if (this.className != 'clicked') {
							//remove it first because it will cause problems otherwise.
							openspace.removeScreenSpaceRenderable(PolarisMarkerObject)
							openspace.addScreenSpaceRenderable(PolarisMarkerObject)
							saveImages.push(PolarisMarkerObject);
							openspace.setPropertyValueSingle('ScreenSpace.PolarisMarker.Scale',0,0)
							openspace.setPropertyValueSingle('ScreenSpace.PolarisMarker.UseRadiusAzimuthElevation', true)
							//coordinates from JPL, ~34 degrees N Latitude
							//note it's in radians!
							openspace.setPropertyValueSingle('ScreenSpace.PolarisMarker.RadiusAzimuthElevation', [15,3.1415928,3.1415928*(defaultTilt+defaultLatitude)/180])
							setTimeout (() => {
								openspace.setPropertyValueSingle('ScreenSpace.PolarisMarker.Scale',1,duration)
							},100)
							if (saveImages.indexOf('PolarisMarker') < 0) {
								//If not then add it
								saveImages.push('PolarisMarker');
							}		
							this.className = 'clicked';
						} else {
							//disable the button to prevent problems
							this.disabled = true;
							openspace.setPropertyValueSingle('ScreenSpace.PolarisMarker.Scale',0,duration)
							setTimeout(() => {
								openspace.removeScreenSpaceRenderable(PolarisMarkerObject)
								//remove this from the array
								var index = saveImages.indexOf('PolarisMarker');
								if (index > -1) {
									//If yes, then remove it
									saveImages.splice(index, 1);
								}
								//enable button after the delay
								this.disabled = false;
								this.className = '';
							},duration*1000)
						}
					},
					'Cardinal Directions': async () => {
						if (this.className != 'clicked') {
							openspace.action.triggerAction('os.nightsky.ShowNeswLettersSmall')
							openspace.fadeIn('Scene.CardinalDirectionSphere.Renderable')
							this.className = 'clicked';
						} else {
							openspace.action.triggerAction('os.nightsky.HideNesw')
							openspace.fadeOut('Scene.CardinalDirectionSphere.Renderable')
							this.className = '';
						}
					},
					//Cardinal Directions won't work above the atmosphere
					'Above Atmosphere': () => {
						//coordinates to customize
						//openspace.navigation.setNavigationState(inSpaceNavigationState)
						openspace.pathnavigation.flyToNavigationState(inSpaceNavigationState, 5)
						ChangeDescription(bigDipperButtons.title,findMessageByButtonName(buttonMessages, this.textContent))
						setTimeout(() => {
							ChangeDescription(bigDipperButtons.title,'')
						},5000)
					},		
				},
			};
			


			var firstConstellationButtons = {
			//Andromeda, Aries, Auriga, Bootes, Canis Major, Canis Minor, Cassiopeia, Gemini, Leo, Orion, Pegasus, Perseus, Pisces, Taurus, Ursa Major, Ursa Minor, Virgo
			//These are case sensitive!
				title: "Jan-Apr",
				description: " ",
				buttons: {
					'Labels': async () => {
						if (this.className != 'clicked') { 
							setTimeout(() => {
								LabelConstellations(1,duration);
							}, 100)
							this.className = 'clicked';
						} else {
							setTimeout(() => {
								LabelConstellations(0,duration);
							}, 100)
							this.className = '';
						}
					},
					'Andromeda Stick': async () => {
						this.className = ConstellationStickButton('Andromeda', this.className);
					},
					'Andromeda Image': async () => {
						this.className = ConstellationImageButton('And', this.className);
					},
					'Aries Stick': async () => {
						this.className = ConstellationStickButton('Aries', this.className);
					},
					'Aries Image': async () => {
						this.className = ConstellationImageButton('Ari', this.className);
					},
					'Auriga Stick': async () => {
						this.className = ConstellationStickButton('Auriga', this.className);
					},
					'Auriga Image': async () => {
						this.className = ConstellationImageButton('Aur', this.className);
					},
					'Bootes Stick': async () => {
						this.className = ConstellationStickButton('Bootes', this.className);
					},
					'Bootes Image': async () => {
						this.className = ConstellationImageButton('Boo', this.className);
					},
					'Canis Major Stick': async () => {
						this.className = ConstellationStickButton('Canis Major', this.className);
					},
					'Canis Major Image': async () => {
						this.className = ConstellationImageButton('CMa', this.className);
					},
					'Canis Minor Stick': async () => {
						this.className = ConstellationStickButton('Canis Minor', this.className);
					},
					'Canis Minor Image': async () => {
						this.className = ConstellationImageButton('CMi', this.className);
					},
					'Cassiopeia Stick': async () => {
						this.className = ConstellationStickButton('Cassiopeia', this.className);
					},
					'Cassiopeia Image': async () => {
						this.className = ConstellationImageButton('Cas', this.className);
					},
					'Gemini Stick': async () => {
						this.className = ConstellationStickButton('Gemini', this.className);
					},
					'Gemini Image': async () => {
						this.className = ConstellationImageButton('Gem', this.className);
					},
					'Leo Stick': async () => {
						this.className = ConstellationStickButton('Leo', this.className);
					},
					'Leo Image': async () => {
						this.className = ConstellationImageButton('Leo', this.className);
					},
					'Orion Stick': async () => {
						this.className = ConstellationStickButton('Orion', this.className);
					},
					'Orion Image': async () => {
						this.className = ConstellationImageButton('Ori', this.className);
					},
					'Pegasus Stick': async () => {
						this.className = ConstellationStickButton('Pegasus', this.className);
					},
					'Pegasus Image': async () => {
						this.className = ConstellationImageButton('Peg', this.className);
					},
					'Perseus Stick': async () => {
						this.className = ConstellationStickButton('Perseus', this.className);
					},
					'Perseus Image': async () => {
						this.className = ConstellationImageButton('Per', this.className);
					},
					'Pisces Stick': async () => {
						this.className = ConstellationStickButton('Pisces', this.className);
					},
					'Pisces Image': async () => {
						this.className = ConstellationImageButton('Psc', this.className);
					},
					'Taurus Stick': async () => {
						this.className = ConstellationStickButton('Taurus', this.className);
					},
					'Taurus Image': async () => {
						this.className = ConstellationImageButton('Tau', this.className);
					},
					'Ursa Major Stick': async () => {
						this.className = ConstellationStickButton('Ursa Major', this.className);
					},
					'Ursa Major Image': async () => {
						this.className = ConstellationImageButton('Uma', this.className);
					},
					'Ursa Minor Stick': async () => {
						this.className = ConstellationStickButton('Ursa Minor', this.className);
					},
					'Ursa Minor Image': async () => {
						this.className = ConstellationImageButton('UMi', this.className);
					},
					'Virgo Stick': async () => {
						this.className = ConstellationStickButton('Virgo', this.className);
					},
					'Virgo Image-': async () => {
						this.className = ConstellationImageButton('Vir', this.className);
					},
					'Pleiades': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						//https://hubblesite.org/contents/media/images/2004/20/1562-Image.html?keyword=m45
						//no spaces in names of files
						this.className = DeepSkyImage('Pleiades',firstConstellationButtons.title,this.textContent,'DeepSky-Pleiades.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)						
					},
				},
			};
			
			var secondConstellationButtons = {
			//Aquila, Auriga, Bootes, Canis Minor, Cassiopeia, Corona Borealis, Cyguns, Gemini, Hercules, leo, Lyra, Sagittarius, Scorpius, Ursa Major, Ursa Minor, Virgo
				title: "May-Aug",
				description: " ",
				buttons: {
					'Labels': async () => {
						if (this.className != 'clicked') { 
							setTimeout(() => {
								LabelConstellations(1,duration);
							}, 100)
							this.className = 'clicked';
						} else {
							setTimeout(() => {
								LabelConstellations(0,duration);
							}, 100)
							this.className = '';
						}
					},
					'Aquila Stick': async () => {
						this.className = ConstellationStickButton('Aquila', this.className);
					},
					'Aquila Image': async () => {
						this.className = ConstellationImageButton('Aql', this.className);
					},
					'Auriga Stick': async () => {
						this.className = ConstellationStickButton('Auriga', this.className);
					},
					'Auriga Image': async () => {
						this.className = ConstellationImageButton('Aur', this.className);
					},
					'Bootes Stick': async () => {
						this.className = ConstellationStickButton('Bootes', this.className);
					},
					'Bootes Image': async () => {
						this.className = ConstellationImageButton('Boo', this.className);
					},
					'Canis Minor Stick': async () => {
						this.className = ConstellationStickButton('Canis Minor', this.className);
					},
					'Canis Minor Image': async () => {
						this.className = ConstellationImageButton('CMi', this.className);
					},
					'Cassiopeia Stick': async () => {
						this.className = ConstellationStickButton('Cassiopeia', this.className);
					},
					'Cassiopeia Image': async () => {
						this.className = ConstellationImageButton('Cas', this.className);
					},
					'Corona Borealis Stick': async () => {
						this.className = ConstellationStickButton('Corona Borealis', this.className);
					},
					'Corona Borealis Image': async () => {
						this.className = ConstellationImageButton('CrB', this.className);
					},
					'Cygnus Stick': async () => {
						this.className = ConstellationStickButton('Cygnus', this.className);
					},
					'Cygnus Image': async () => {
						this.className = ConstellationImageButton('Cyg', this.className);
					},
					'Gemini Stick': async () => {
						this.className = ConstellationStickButton('Gemini', this.className);
					},
					'Gemini Image': async () => {
						this.className = ConstellationImageButton('Gem', this.className);
					},
					'Hercules Stick': async () => {
						this.className = ConstellationStickButton('Hercules', this.className);
					},
					'Hercules Image': async () => {
						this.className = ConstellationImageButton('Her', this.className);
					},
					'Leo Stick': async () => {
						this.className = ConstellationStickButton('Leo', this.className);
					},
					'Leo Image': async () => {
						this.className = ConstellationImageButton('Leo', this.className);
					},
					'Lyra Stick': async () => {
						this.className = ConstellationStickButton('Lyra', this.className);
					},
					'Lyra Image': async () => {
						this.className = ConstellationImageButton('Lyr', this.className);
					},
					'Sagittarius Stick': async () => {
						this.className = ConstellationStickButton('Sagittarius', this.className);
					},
					'Sagittarius Image': async () => {
						this.className = ConstellationImageButton('Sgr', this.className);
					},
					'Scorpius Stick': async () => {
						this.className = ConstellationStickButton('Scorpius', this.className);
					},
					'Scorpius Image': async () => {
						this.className = ConstellationImageButton('Sco', this.className);
					},
					'Ursa Major Stick': async () => {
						this.className = ConstellationStickButton('Ursa Major', this.className);
					},
					'Ursa Major Image': async () => {
						this.className = ConstellationImageButton('Uma', this.className);
					},
					'Ursa Minor Stick': async () => {
						this.className = ConstellationStickButton('Ursa Minor', this.className);
					},
					'Ursa Minor Image': async () => {
						this.className = ConstellationImageButton('UMi', this.className);
					},
					'Virgo Stick': async () => {
						this.className = ConstellationStickButton('Virgo', this.className);
					},
					'Virgo Image-': async () => {
						this.className = ConstellationImageButton('Vir', this.className);
					},
					'Exoplanet Watch': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						//https://exoplanets.nasa.gov/exoplanet-watch/about-exoplanet-watch/overview/
						//no spaces in names of files
						this.className = DeepSkyImage('ExoplanetWatch',secondConstellationButtons.title,this.textContent,'DeepSky-ExoplanetWatch.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)
						
					},
					'Hercules Globular Cluster': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						//https://science.nasa.gov/mission/hubble/science/explore-the-night-sky/hubble-messier-catalog/messier-13
						//no spaces in names of files
						this.className = DeepSkyImage('HerculesGlobularCluster',secondConstellationButtons.title,this.textContent,'DeepSky-HerculesGlobularCluster.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)				
					},
					'Kepler-62 f': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						//https://www.jpl.nasa.gov/news/kepler-discovers-its-smallest-habitable-zone-planets
						//no spaces in names of files
						this.className = DeepSkyImage('Kepler62f',secondConstellationButtons.title,this.textContent,'DeepSky-Kepler62f.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)				
					},
					'Pleiades': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						//https://hubblesite.org/contents/media/images/2004/20/1562-Image.html?keyword=m45
						//no spaces in names of files
						this.className = DeepSkyImage('Pleiades',secondConstellationButtons.title,this.textContent,'DeepSky-Pleiades.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)					
					},
					'Ring Nebula': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						//https://stsci-opo.org/STScI-01H82GANSY85GHFY3Y2FN9R65P.png
						//no spaces in names of files
						this.className = DeepSkyImage('RingNebula',secondConstellationButtons.title,this.textContent,'DeepSky-RingNebula.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)
					},	
					'Sagittarius A*': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						////https://chandra.harvard.edu/photo/2022/sgra/
						//no spaces in names of files
						this.className = DeepSkyImage('SagittariusA',secondConstellationButtons.title,this.textContent,'DeepSky-SagittariusA.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)
					},						
					'T Corona Borealis Nova': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						//https://svs.gsfc.nasa.gov/11608
						//https://universe-of-learning.org/contents/events/science-briefings/2024/preparing-for-the-predicted-t-coronae-borealis-nova
						//no spaces in names of files
						this.className = DeepSkyImage('TCoronaBorealisNova',secondConstellationButtons.title,this.textContent,'DeepSky-TCoronaBorealisNova.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)
					},		
					'Whirlpool Galaxy': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;
						//https://science.nasa.gov/mission/hubble/science/explore-the-night-sky/hubble-messier-catalog/messier-51/
						//no spaces in names of files
						this.className = DeepSkyImage('WhirlpoolGalaxy',secondConstellationButtons.title,this.textContent,'DeepSky-WhirlpoolGalaxy.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)
					},	
				},
			};
			
			var thirdConstellationButtons = {
			//Andromeda, Aries, Aquila, Auriga, Bootes, Capricorn, Cassiopeia, Corona Borealis, Cygnus, Gemini, Hercules, Lyra, Orion, Pegasus, Perseus, Pisces, Sagittarius, Taurus, Ursa Major, Ursa Minor
				title: "Sep-Dec",
				description: " ",
				buttons: {
					'Andromeda Stick': async () => {
						this.className = ConstellationStickButton('Andromeda', this.className);
					},
					'Andromeda Image': async () => {
						this.className = ConstellationImageButton('And', this.className);
					},
					'Aries Stick': async () => {
						this.className = ConstellationStickButton('Aries', this.className);
					},
					'Aries Image': async () => {
						this.className = ConstellationImageButton('Ari', this.className);
					},
					'Aquila Stick': async () => {
						this.className = ConstellationStickButton('Aquila', this.className);
					},
					'Aquila Image': async () => {
						this.className = ConstellationImageButton('Aql', this.className);
					},
					'Auriga Stick': async () => {
						this.className = ConstellationStickButton('Auriga', this.className);
					},
					'Auriga Image': async () => {
						this.className = ConstellationImageButton('Aur', this.className);
					},
					'Bootes Stick': async () => {
						this.className = ConstellationStickButton('Bootes', this.className);
					},
					'Bootes Image': async () => {
						this.className = ConstellationImageButton('Boo', this.className);
					},
					'Capricorn Stick': async () => {
						this.className = ConstellationStickButton('Capricorn', this.className);
					},
					'Capricorn Image': async () => {
						this.className = ConstellationImageButton('Cap', this.className);
					},
					'Cassiopeia Stick': async () => {
						this.className = ConstellationStickButton('Cassiopeia', this.className);
					},
					'Cassiopeia Image': async () => {
						this.className = ConstellationImageButton('Cas', this.className);
					},
					'Corona Borealis Stick': async () => {
						this.className = ConstellationStickButton('Corona Borealis', this.className);
					},
					'Corona Borealis Image': async () => {
						this.className = ConstellationImageButton('CrB', this.className);
					},
					'Cygnus Stick': async () => {
						this.className = ConstellationStickButton('Cygnus', this.className);
					},
					'Cygnus Image': async () => {
						this.className = ConstellationImageButton('Cyg', this.className);
					},
					'Gemini Stick': async () => {
						this.className = ConstellationStickButton('Gemini', this.className);
					},
					'Gemini Image': async () => {
						this.className = ConstellationImageButton('Gem', this.className);
					},
					'Hercules Stick': async () => {
						this.className = ConstellationStickButton('Hercules', this.className);
					},
					'Hercules Image': async () => {
						this.className = ConstellationImageButton('Her', this.className);
					},
					'Lyra Stick': async () => {
						this.className = ConstellationStickButton('Lyra', this.className);
					},
					'Lyra Image': async () => {
						this.className = ConstellationImageButton('Lyr', this.className);
					},
					'Orion Stick': async () => {
						this.className = ConstellationStickButton('Orion', this.className);
					},
					'Orion Image': async () => {
						this.className = ConstellationImageButton('Ori', this.className);
					},
					'Pegasus Stick': async () => {
						this.className = ConstellationStickButton('Pegasus', this.className);
					},
					'Pegasus Image': async () => {
						this.className = ConstellationImageButton('Peg', this.className);
					},
					'Perseus Stick': async () => {
						this.className = ConstellationStickButton('Perseus', this.className);
					},
					'Perseus Image': async () => {
						this.className = ConstellationImageButton('Per', this.className);
					},
					'Pisces Stick': async () => {
						this.className = ConstellationStickButton('Pisces', this.className);
					},
					'Pisces Image': async () => {
						this.className = ConstellationImageButton('Psc', this.className);
					},
					'Sagittarius Stick': async () => {
						this.className = ConstellationStickButton('Sagittarius', this.className);
					},
					'Sagittarius Image': async () => {
						this.className = ConstellationImageButton('Sgr', this.className);
					},
					'Taurus Stick': async () => {
						this.className = ConstellationStickButton('Taurus', this.className);
					},
					'Taurus Image': async () => {
						this.className = ConstellationImageButton('Tau', this.className);
					},
					'Ursa Major Stick': async () => {
						this.className = ConstellationStickButton('Ursa Major', this.className);
					},
					'Ursa Major Image': async () => {
						this.className = ConstellationImageButton('Uma', this.className);
					},
					'Ursa Minor Stick': async () => {
						this.className = ConstellationStickButton('Ursa Minor', this.className);
					},
					'Ursa Minor Image-': async () => {
						this.className = ConstellationImageButton('UMi', this.className);
					},
					'Ring Nebula': async () => {
						//prevent the button from being interrupted to avoid errors
						this.disabled = true;

						//https://stsci-opo.org/STScI-01H82GANSY85GHFY3Y2FN9R65P.png
						//no spaces in names of files
						this.className = DeepSkyImage('RingNebula',thirdConstellationButtons.title,this.textContent,'DeepSky-RingNebula.png', this.className);

						//enable button again after
						setTimeout(()=>{this.disabled = false;},duration*1000)
					},					
				},
			};
			
			var allConstellationButtons = {
				title: "All Constellations",
				description: " ",
				buttons: {
					'Sticks': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Fade',0,0.1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.ConstellationSelection', [])
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Enabled', true)
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.DrawElements', true)
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Fade',1, duration)
							}, 100)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Bounds': async () => {
						if (this.className != 'clicked') { 
							openspace.setPropertyValueSingle('Scene.ConstellationBounds.Renderable.Fade',0,0.1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.ConstellationBounds.Renderable.Enabled', true)
								openspace.setPropertyValueSingle('Scene.ConstellationBounds.Renderable.Fade',1, duration)
							}, 100)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.ConstellationBounds.Renderable.Fade',0,1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.ConstellationBounds.Renderable.Enabled', false)
							}, 1100)
							this.className = '';
						}
					},
					'Art': async () => {
						//for easier adjustments, change here:
						
						const opacity = 1;
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.ImageConstellation-And.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ant.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Aps.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Aqr.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Aql.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ara.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ari.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Aur.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Boo.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cae.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cam.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cnc.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CVn.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CMa.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CMi.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cap.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Car.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cas.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cen.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cep.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cet.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cir.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Col.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Com.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CrA.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CrB.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Crv.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Crt.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cru.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cyg.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Del.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Dor.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Dra.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Equ.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Eri.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-For.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Gem.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Gru.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Her.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Hor.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Hya.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Hyi.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ind.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lac.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Leo.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-LMi.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lep.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lib.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lup.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lyn.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lyr.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Men.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Mic.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Mon.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Mus.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Nor.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Oct.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Oph.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ori.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Pav.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Peg.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Per.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Phe.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Pic.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Psc.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-PsA.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Pyx.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sge.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sgr.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sco.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Scl.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sct.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sex.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Tau.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-TrA.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Tel.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Tri.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Tuc.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-UMi.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Vir.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Vol.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Vul.Renderable.Enabled', true)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.ImageConstellation-And.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ant.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Aps.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Aqr.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Aql.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ara.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ari.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Aur.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Boo.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cae.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cam.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cnc.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CVn.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CMa.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CMi.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cap.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Car.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cas.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cen.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cep.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cet.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cir.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Col.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Com.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CrA.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CrB.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Crv.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Crt.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cru.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cyg.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Del.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Dor.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Dra.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Equ.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Eri.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-For.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Gem.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Gru.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Her.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Hor.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Hya.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Hyi.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ind.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lac.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Leo.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-LMi.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lep.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lib.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lup.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lyn.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lyr.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Men.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Mic.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Mon.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Mus.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Nor.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Oct.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Oph.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ori.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Pav.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Peg.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Per.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Phe.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Pic.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Psc.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-PsA.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Pyx.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ret.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sge.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sgr.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sco.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Scl.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sct.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sex.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Tau.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-TrA.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Tel.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Tri.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Tuc.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-UMi.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Vir.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Vol.Renderable.Fade',opacity,duration)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Vul.Renderable.Fade',opacity,duration)
							}, 100)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.ImageConstellation-And.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ant.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Aps.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Aqr.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Aql.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ara.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ari.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Aur.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Boo.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cae.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cam.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cnc.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CVn.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CMa.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CMi.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cap.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Car.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cas.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cen.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cep.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cet.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cir.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Col.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Com.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CrA.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-CrB.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Crv.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Crt.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cru.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Cyg.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Del.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Dor.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Dra.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Equ.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Eri.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-For.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Gem.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Gru.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Her.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Hor.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Hya.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Hyi.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ind.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lac.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Leo.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-LMi.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lep.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lib.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lup.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lyn.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Lyr.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Men.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Mic.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Mon.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Mus.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Nor.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Oct.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Oph.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ori.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Pav.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Peg.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Per.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Phe.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Pic.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Psc.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-PsA.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Pyx.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Ret.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sge.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sgr.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sco.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Scl.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sct.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Sex.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Tau.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-TrA.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Tel.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Tri.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Tuc.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.Fade',0,duration)	
							openspace.setPropertyValueSingle('Scene.ImageConstellation-UMi.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Vir.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Vol.Renderable.Fade',0,duration)
							openspace.setPropertyValueSingle('Scene.ImageConstellation-Vul.Renderable.Fade',0,duration)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.ImageConstellation-And.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ant.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Aps.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Aqr.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Aql.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ara.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ari.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Aur.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Boo.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cae.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cam.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cnc.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CVn.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CMa.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CMi.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cap.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Car.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cas.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cen.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cep.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cet.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cir.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Col.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Com.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CrA.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-CrB.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Crv.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Crt.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cru.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Cyg.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Del.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Dor.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Dra.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Equ.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Eri.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-For.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Gem.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Gru.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Her.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Hor.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Hya.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Hyi.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ind.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lac.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Leo.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-LMi.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lep.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lib.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lup.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lyn.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Lyr.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Men.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Mic.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Mon.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Mus.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Nor.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Oct.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Oph.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Ori.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Pav.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Peg.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Per.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Phe.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Pic.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Psc.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-PsA.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Pyx.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sge.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sgr.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sco.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Scl.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sct.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Sex.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Tau.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-TrA.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Tel.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Tri.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Tuc.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Uma.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-UMi.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Vir.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Vol.Renderable.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ImageConstellation-Vul.Renderable.Enabled', false)
							}, duration*1000+100)
								this.className = '';
						}
					},
					
					'Labels': async () => {
						const opacity =1;
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.Fade',0,0.1)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.Enabled', true)
								openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.Labels.Enabled', true)								
								//turn off these stick figures because we like the others better.
								openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.DrawElements', false)
								setTimeout(() => {
									openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.Fade',opacity,duration)
									openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.Labels.Fade',opacity,duration)
								}, 100)
							}, 100)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.Labels.Fade',0,duration)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.Labels.Enabled', false)
								openspace.setPropertyValueSingle('Scene.ConstellationsExtragalactic.Renderable.Enabled', false)
							}, duration*1000+100)
							this.className = '';
						}
					},
					'Fly to View Diurnal': () => {
						TemporaryStopOrbit();
						openspace.pathnavigation.flyToHeight('Earth', 10000000, true, flightDuration)
						openspace.setPropertyValueSingle('NavigationHandler.OrbitalNavigator.FollowAnchorNodeRotation', false)
						document.getElementById('Show Earth').click();
					},
					'Focus on the Earth': () => 
						{setFocus('Earth')
						document.getElementById('Show Earth').click();
					},
					'Run Diurnal': () => {
						openspace.time.interpolateTimeRelative(86400,30)
					},
					'Orbit': () => {
						if (this.className != 'clicked') {
							StartOrbit();
							this.className = 'clicked';
							//this.textContent = 'Stop Orbit';
						} else {
							StopOrbit();
							this.className = '';
							//this.textContent = 'Gentle Orbit';
						}						
					},
					'Fly Beyond Constellations': () => {
						TemporaryStopOrbit();
						openspace.pathnavigation.flyToHeight('Earth', 1e19, true, flightDuration)
						openspace.setPropertyValueSingle('NavigationHandler.OrbitalNavigator.FollowAnchorNodeRotation', true)
					},
					'Exoplanets': async () => {
						if (this.className != 'clicked') {
							openspace.setPropertyValueSingle('Scene.Exoplanets.Renderable.Enabled', true)
							openspace.setPropertyValueSingle('Scene.Exoplanets.Renderable.Fade',0,0)
							openspace.setPropertyValueSingle('Scene.Exoplanets.Renderable.ScaleFactor', 420)
							openspace.setPropertyValueSingle('Scene.Exoplanets.Renderable.Fade',1,duration)
							this.className = 'clicked';
						} else {
							openspace.setPropertyValueSingle('Scene.Exoplanets.Renderable.Fade',0,duration)
							setTimeout(() => {
								openspace.setPropertyValueSingle('Scene.Exoplanets.Renderable.Enabled', false)
							}, duration*1000+100);
							this.className = '';
						}
					},
					'Fly Beyond the Galaxy': () => {
						TemporaryStopOrbit();
						openspace.pathnavigation.flyToHeight('Earth', 5e20, true, flightDuration)
						openspace.setPropertyValueSingle('NavigationHandler.OrbitalNavigator.FollowAnchorNodeRotation', true)
					},
					'Fly to CMB': () => {
						TemporaryStopOrbit();		
						openspace.pathnavigation.flyToHeight('Earth', 3e26, true, flightDuration)
						openspace.setPropertyValueSingle('NavigationHandler.OrbitalNavigator.FollowAnchorNodeRotation', true)
					},
				},
			};

			var programmingButtons = {
				title: "Programming Buttons",
				description: "Use this to find your NavState for customized flying sequences",
				buttons: {
					'Show Nav State': () => {
						var navState = openspace.navigation.getNavigationState();
						//console.log(navState);
						ChangeDescription(programmingButtons.title,navState)
						/*
						document.getElementById(programmingButtons.title).innerHTML += navState;
						// Using then() to display result
						navState.then(x => myDisplay(x));

						// Funtion to run when the Promise is settled:
						function myDisplay(navObj) {
							document.getElementById(programmingButtons.title).innerHTML = JSON.stringify(navObj);
						}
						*/
					},
				},
			};
			
			var templateButtons = {
				title: "title_name",
				description: " ",
				buttons: {
					'button1': () => {
					},
					'togglebutton1': async () => {
						if (this.className != 'clicked') { 
							setTimeout(() => {
							}, 100)
							this.className = 'clicked';
						} else {
							setTimeout(() => {
							}, duration*1000+100)
							this.className = '';
						}
					},
				},
			};
			
//end of buttons			
			var buttonGroups = [setupButtons,planetZoomButtons,bigDipperButtons,firstConstellationButtons,secondConstellationButtons,thirdConstellationButtons,allConstellationButtons,programmingButtons];

			
//OpenSpace Connecting and Mapping buttons		
			function mapButtons(openspace) {
				buttonGroups.map((action, id) => {
					var cardIndex = '';
					if( id % 2 == 1 ) {
						cardIndex = "1";
					}
					var cardHTML = "<div class='card" + cardIndex +"'><h2>" + action.title + "</h2>";
					if (action.buttons) {
						Object.keys(action.buttons).map(button => {
							const fn = action.buttons[button];
							cardHTML += '<button id="' + button + '" onClick="(' + fn + ')(event)">' + button + '</button>';
							//add line break after some buttons
							if (button == 'Pluto Zoom_' || button == 'Night Sky Planets' || button == 'Earth Atmosphere' || button == 'Run Diurnal') {
								cardHTML += '<br />';
							}	
							//add horizontal line after certain buttons, using the '-' as a tag
							if (button == 'Ursa Minor Image-' || button == 'Virgo Image-') {
								cardHTML += '<hr>';
							}	
						});
					}
					if (action.description) {
						action.description.split('\n').map(item => {
							cardHTML += "<p id='" + action.title + "'>" + item + "</p>";
						});
					}					
					cardHTML += "</div>";
					document.getElementById('main').innerHTML += cardHTML;
					//color these buttons just to start
					document.getElementById('Show Trails').className = 'Positive';
					document.getElementById('Show Earth').className = 'Positive';
					document.getElementById('Run Time').className = 'Positive';
				})
			}
			
			var connectToOpenSpace = () => {
				var host = document.getElementById('ipaddress').value;
				var api = window.openspaceApi(host, 4682);
				api.onDisconnect(() => {
					console.log("disconnected");
					document.getElementById('container').className = "disconnected";
					var disconnectedString = "Unable to connect, please run OpenSpace: ";
					disconnectedString += '<input id="ipaddress" type=text placeholder="Enter IP address" /> ';
					disconnectedString += '<button onClick="connectToOpenSpace();">Connect</button>';
					document.getElementById('connection-status').innerHTML = disconnectedString;
					openspace = null;
				});
				api.onConnect(async () => {
					try {
						document.getElementById('container').className = "connected";
						document.getElementById('connection-status').innerHTML = "Connected to OpenSpace";
						openspace = await api.library();
						console.log('connected');
						//wipe the page first before building the buttons
						document.getElementById('main').innerHTML = '';
						mapButtons(openspace);
					} catch (e) {
						console.log('OpenSpace library could not be loaded: Error: \n', e)
						return;
					}
				})
				api.connect();
			};
		</script>
	</head>

	<body>
		
		<div class="navbar">
			<h1>"Constellations Tonight" in OpenSpace
			<button type="button" id="playMusic">
			Play BG Music
			</button>
			<input style="width:25%" type="range" id="bgVolumeSlider" value="0"></h1>
			<script>
				//For Background Music Play/pause and volume slider
				var bgMusicFile = document.getElementById("bgmusic"); 
				bgMusicFile.loop = true;
				var bgVolumeValue = 0;
				var bgVolumeMax = 100;
				var bgVolumeMin = 0;
				var fadeDuration = 1; //in seconds
				var sliderValue = document.getElementById("bgVolumeSlider");
				bgMusicButton = document.getElementById("playMusic");
				// update the volume when the slider is moved
				bgVolumeSlider.addEventListener("input", (sliderValue) => {
					bgMusicFile.volume = sliderValue.currentTarget.value / 100;
					bgVolumeValue = sliderValue.currentTarget.value;
				});
				playMusic.addEventListener("click", (e) => {
					if (bgMusicFile.paused) {
						bgMusicFile.play()
						bgMusicButton.classList.add("clicked");
						document.getElementById("playMusic").innerHTML="Pause BG Music";
						var fadeAudio = setInterval(() => {
							bgVolumeValue++;
							//console.log(bgVolumeValue);
							bgMusicFile.volume = bgVolumeValue / 100;
							sliderValue.value = bgVolumeValue;
							if (bgVolumeValue >= bgVolumeMax) {
								clearInterval(fadeAudio);
							}
						}, fadeDuration*10);				
					} else {
						bgMusicButton.classList.remove("clicked");
						document.getElementById("playMusic").innerHTML="Play BG Music";
						var fadeAudio = setInterval(() => {
							bgVolumeValue--;
							//console.log(bgVolumeValue);
							bgMusicFile.volume = bgVolumeValue / 100;
							sliderValue.value = bgVolumeValue;
							if (bgVolumeValue <= bgVolumeMin) {
								clearInterval(fadeAudio);
							}
						}, fadeDuration*10);
						setTimeout(() => {
							bgMusicFile.pause();
						}, fadeDuration*1000)
					}
				});										
			</script>
		</div>
		<div id="container" class="disconnected">
			<div id="connection-status" class="connection-status">
				Connect to OpenSpace:
				<input id='ipaddress' type=text placeholder="Enter IP address" />
				<button onClick="connectToOpenSpace();">Connect</button>
			</div>\

			<div id="main" class="generatedButtons">
			</div>
			<script type="text/javascript">
				connectToOpenSpace('localhost');
			</script>

			<p>Thanks to the <a href="https://stemgateway.nasa.gov/connects/s/mie-alliance-landing-page">NASA Museum & Informal Education Alliance</a>.  Have questions?  Need help?  Email: <a href="mailto:jnee@jpl.nasa.gov">jnee@jpl.nasa.gov</a></p>
		</div>
	</body>
</html>